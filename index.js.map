{"version":3,"sources":["src/store.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import localforage from 'localforage'\nimport {series} from 'async';\n\nvar self\n  , emptyFn = () => {}\n;\n\n\nclass Store {\n  constructor(opts, cb) {\n    self = this;\n    self.active = self.hasStore(cb);\n  }\n\n  setItem(key, val, cb) {\n    cb = is.fn(cb) ? cb : emptyFn;\n    if ( is.fn(val) && ! cb ) {\n      cb = val;\n      val = false;\n    }\n    if ( ! val && is.a(key, 'object') ) {\n      if ( is.string(key.val) && is.string(key.key) ) {\n        val = key.val;\n        key = key.key;\n      }\n    }\n    localforage.setItem(key, val, cb);\n  }\n\n  getItem(key, cb) {\n    cb = is.fn(cb) ? cb : emptyFn;\n\n    if ( is.a(key, 'object') ) {\n      if ( is.string(key.key) ) {\n        key = key.key;\n      }\n    }\n    localforage.getItem(key, cb);\n  }\n\n  removeItem(key, cb) {\n    cb = is.fn(cb) ? cb : emptyFn;\n\n    if ( is.a(key, 'object') ) {\n      if ( is.string(key.key) ) {\n        key = key.key;\n      }\n    }\n    localforage.removeItem(key, cb);\n  }\n\n  hasStore(cb) {\n    cb = is.fn(cb) ? cb : emptyFn;\n\n    try {\n      waterfall([\n        (wcb) => {\n          var item = {\n            key: 'itemtest235',\n            val: 'mod'\n          };\n          wcb(item);\n        }\n        , self.setItem\n        , self.getItem\n        , self.removeItem\n      ], (err, item) => {\n        if (err) { throw Error(err) };\n        cb(true);\n      });\n    } catch(e) {\n      cb(false);\n    }\n  }\n}\n\nexport var forage = localforage;\n"]}